<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="author" content="Challenge DevOps Team" />
      <link rel="shortcut icon" href="../../img/favicon.ico" />
    <title>Os exec - Challenge DevOps</title>
    <link rel="stylesheet" href="../../css/theme.css" />
    <link rel="stylesheet" href="../../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Os exec";
        var mkdocs_page_input_path = "golang/learning/os-exec.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../../index.html" class="icon icon-home"> Challenge DevOps
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../index.html">About Us</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Code Rendering Types</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../rendering/concept.html">Concept</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../rendering/CSR.html">CSR</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../rendering/SSR.html">SSR</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../rendering/SSG.html">SSG</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../rendering/ISR.html">ISR</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Networking</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="#">learning</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../networking/learning/networking-overview.html">Networking overview</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../networking/learning/important-commands.html">Important commands</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../networking/learning/traceroute.html">Traceroute</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../networking/learning/netstat.html">Netstat</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../networking/learning/nslookup-dig.html">Nslookup dig</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../networking/learning/ssh.html">Ssh</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../networking/learning/telnet.html">Telnet</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../networking/learning/nmap.html">Nmap</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../networking/learning/curl-wget.html">Curl wget</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="#">projects</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../networking/projects/1-Setting-Up-a-Secure-VPN.html">1 Setting Up a Secure VPN</a>
                </li>
    </ul>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Proxies</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="#">learning</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../proxies/learning/overview.html">Overview</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="#">projects</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../proxies/projects/1-Reverse-Proxy-Server-Nginx.html">1 Reverse Proxy Server Nginx</a>
                </li>
    </ul>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Ansible</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="#">learning</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../ansible/learning/1-overview.html">1 overview</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../ansible/learning/2-basic.html">2 basic</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../ansible/learning/3-ansible-features.html">3 ansible features</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="#">projects</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../ansible/projects/1-Web-Server-nginx.html">1 Web Server nginx</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../ansible/projects/2-Managing-System-Packages.html">2 Managing System Packages</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../ansible/projects/3-Configuring-a-Firewall.html">3 Configuring a Firewall</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../ansible/projects/4-Web-App-Using-Docker.html">4 Web App Using Docker</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../ansible/projects/5-run-nginx-container.html">5 run nginx container</a>
                </li>
    </ul>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Golang</span></p>
              <ul class="current">
                  <li class="toctree-l1 current"><a class="reference internal current" href="#">learning</a>
    <ul class="current">
                <li class="toctree-l2"><a class="reference internal" href="important-packages.html">Important packages</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="func-breakdown.html">Func breakdown</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="pointers-dereferencing.html">Pointers dereferencing</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="methods.html">Methods</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="struct.html">Struct</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="file-operations.html">File operations</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="complex-struct.html">Complex struct</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="database-struct.html">Database struct</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="db-connection.html">Db connection</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="db-crud.html">Db crud</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="json.html">Json</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="yaml.html">Yaml</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="os-package.html">Os package</a>
                </li>
                <li class="toctree-l2 current"><a class="reference internal current" href="os-exec.html">Os exec</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="path-filepath.html">Path filepath</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="encoding-json.html">Encoding json</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="net-http.html">Net http</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="strconv.html">Strconv</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="context.html">Context</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="strings.html">Strings</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="#">projects</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../projects/1-Simple-CLI-Tool.html">1 Simple CLI Tool</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../projects/2-Web-Server-with-Basic-API.html">2 Web Server with Basic API</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../projects/4-Container-Image-Builder.html">4 Container Image Builder</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../projects/7-color-print-message.html">7 color print message</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../projects/8-Currency-Conversion-API.html">8 Currency Conversion API</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../projects/9.Todo-List-API.html">9.Todo List API</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../projects/10-Recipe-API.html">10 Recipe API</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../projects/11-contact-list-csv.html">11 contact list csv</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../projects/12-mongodb-manual.html">12 mongodb manual</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../projects/13-mongoDB-API.html">13 mongoDB API</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../projects/14-midleware-okta.html">14 midleware okta</a>
                </li>
    </ul>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Bash-Scripting</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="#">learning</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../bash/learning/special-variable.html">Special variable</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../bash/learning/conditional-expression.html">Conditional expression</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../bash/learning/jq.html">Jq</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../bash/learning/yq.html">Yq</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="#">projects</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../bash/projects/1-File-Organizer.html">1 File Organizer</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../bash/projects/2-System-Monitor.html">2 System Monitor</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../bash/projects/3-Backup-Script.html">3 Backup Script</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../bash/projects/4-Web-Log-Analyzer.html">4 Web Log Analyzer</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../bash/projects/5-Task-Scheduler.html">5 Task Scheduler</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../bash/projects/6-color-print-message.html">6 color print message</a>
                </li>
    </ul>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Challenge DevOps</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../index.html" class="icon icon-home" aria-label="Docs"></a></li>
          <li class="breadcrumb-item">Golang</li>
          <li class="breadcrumb-item">learning</li>
      <li class="breadcrumb-item active">Os exec</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <p>The <code>os/exec</code> package in Go is used to run external commands. It provides a way to run system commands, capture their output, and control their input. By applying the 80-20 principle, we can focus on the most critical aspects of <code>os/exec</code> that will cover the majority of use cases.  </p>
<ol>
<li><strong>Running External Commands</strong>:  </li>
<li>
<p><code>exec.Command(name string, arg ...string) *Cmd</code>: This is the most important function, which creates a new <code>Cmd</code> object to represent an external command. The <code>name</code> is the command to run, and <code>arg</code> are the arguments to pass to it.  </p>
</li>
<li>
<p><strong>Command Execution</strong>:  </p>
</li>
<li><code>cmd.Run() error</code>: Executes the command, waits for it to finish, and returns any error that occurs.  </li>
<li><code>cmd.Start() error</code>: Starts the command but does not wait for it to complete. You need to call <code>cmd.Wait()</code> to wait for the command to finish and release associated resources.  </li>
<li><code>cmd.Output() ([]byte, error)</code>: Runs the command and returns its standard output. It's useful when you're only interested in the output of the command.  </li>
<li>
<p><code>cmd.CombinedOutput() ([]byte, error)</code>: Runs the command and returns its combined standard output and standard error.  </p>
</li>
<li>
<p><strong>Standard I/O</strong>:  </p>
</li>
<li>
<p><code>cmd.Stdin</code>, <code>cmd.Stdout</code>, <code>cmd.Stderr</code>: These fields can be set to specify the command's standard input, output, and error streams. You can use them to redirect I/O to files, buffers, or other processes.  </p>
</li>
<li>
<p><strong>Environment and Working Directory</strong>:  </p>
</li>
<li><code>cmd.Env []string</code>: If non-nil, it replaces the system environment for the command.  </li>
<li><code>cmd.Dir string</code>: Sets the command's working directory.  </li>
</ol>
<p><strong>Scenarios</strong>:  </p>
<ul>
<li><strong>Running Shell Commands</strong>: If you need to invoke shell commands like <code>ls</code>, <code>grep</code>, or <code>mkdir</code>, you would use <code>exec.Command</code> with <code>cmd.Run</code> or <code>cmd.Output</code> to execute the command and optionally capture its output.  </li>
</ul>
<pre class="codehilite"><code class="language-go">cmd := exec.Command(&quot;ls&quot;, &quot;-l&quot;, &quot;/some/directory&quot;)  
output, err := cmd.Output()  
if err != nil {  
    log.Fatal(err)  
}  
fmt.Println(string(output))  
</code></pre>

<ul>
<li><strong>Streaming Output</strong>: When running commands that produce continuous output (like <code>tail -f</code>), you can set <code>cmd.Stdout</code> to an os.File or a buffer to read the stream.  </li>
</ul>
<pre class="codehilite"><code class="language-go">cmd := exec.Command(&quot;tail&quot;, &quot;-f&quot;, &quot;/var/log/syslog&quot;)  
cmd.Stdout = os.Stdout // Redirect output to the standard output of the Go process  
err := cmd.Start()  
if err != nil {  
    log.Fatal(err)  
}  
err = cmd.Wait() // Wait for the command to finish  
</code></pre>

<ul>
<li><strong>Pipelines and Redirection</strong>: For constructing pipelines or redirecting output from one command to another, use the standard I/O fields.  </li>
</ul>
<pre class="codehilite"><code class="language-go">grepCmd := exec.Command(&quot;grep&quot;, &quot;error&quot;)  
catCmd := exec.Command(&quot;cat&quot;, &quot;/var/log/syslog&quot;)  

// Create a pipe between cat and grep  
pipe, _ := catCmd.StdoutPipe()  
grepCmd.Stdin = pipe  

// Start the 'grep' before 'cat' to avoid deadlock  
grepCmd.Start()  
catCmd.Run()  
pipe.Close()  

output, _ := ioutil.ReadAll(grepCmd.Stdout)  
grepCmd.Wait()  
</code></pre>

<ul>
<li><strong>Background Processes</strong>: If you're running a background task, such as starting a local server, use <code>cmd.Start</code> without immediately waiting for it to finish.  </li>
</ul>
<pre class="codehilite"><code class="language-go">cmd := exec.Command(&quot;some_server&quot;)  
err := cmd.Start()  
if err != nil {  
    log.Fatal(err)  
}  

// Do other work or keep the application running  
// ...  

// Later, you can wait for the command to finish  
err = cmd.Wait()  
if err != nil {  
    log.Fatal(err)  
}  
</code></pre>

<ul>
<li><strong>Custom Environment Variables</strong>: In scenarios where you need to run a command with a specific set of environment variables, you can use the <code>cmd.Env</code> field to set them before running the command. This is useful when dealing with tools that require environment configuration or when isolating the command's environment from the parent process.  </li>
</ul>
<pre class="codehilite"><code class="language-go">cmd := exec.Command(&quot;some_command&quot;)  
cmd.Env = append(os.Environ(), &quot;CUSTOM_VAR=VALUE&quot;)  
output, err := cmd.Output()  
if err != nil {  
    log.Fatal(err)  
}  
fmt.Println(string(output))  
</code></pre>

<ul>
<li><strong>Running Commands in a Specific Directory</strong>: Sometimes, you need to run a command within a specific directory context. You can set <code>cmd.Dir</code> to change the working directory of the command.  </li>
</ul>
<pre class="codehilite"><code class="language-go">cmd := exec.Command(&quot;git&quot;, &quot;status&quot;)  
cmd.Dir = &quot;/path/to/git/repo&quot;  
output, err := cmd.Output()  
if err != nil {  
    log.Fatal(err)  
}  
fmt.Println(string(output))  
</code></pre>

<ul>
<li><strong>Interacting with Command Input</strong>: If the external command requires input from the standard input, you can write to <code>cmd.Stdin</code>. This is common when you're dealing with commands that prompt for user input or read from the terminal.  </li>
</ul>
<pre class="codehilite"><code class="language-go">cmd := exec.Command(&quot;passwd&quot;, &quot;username&quot;)  
stdin, err := cmd.StdinPipe()  
if err != nil {  
    log.Fatal(err)  
}  

// Write the desired input to the command's stdin  
go func() {  
    defer stdin.Close()  
    io.WriteString(stdin, &quot;newpassword\nnewpassword\n&quot;)  
}()  

err = cmd.Run()  
if err != nil {  
    log.Fatal(err)  
}  
</code></pre>

<ul>
<li><strong>Error Handling</strong>: When running a command, it's important to handle errors properly. The command might fail to start, or it might run and return a non-zero exit status, indicating an error. Always check the error returned from <code>Run</code>, <code>Start</code>, <code>Output</code>, or <code>CombinedOutput</code>.  </li>
</ul>
<pre class="codehilite"><code class="language-go">cmd := exec.Command(&quot;some_command&quot;, &quot;arg1&quot;, &quot;arg2&quot;)  
err := cmd.Run()  
if err != nil {  
    if exitErr, ok := err.(*exec.ExitError); ok {  
        // The command has run but returned a non-zero status  
        fmt.Println(&quot;Command failed with:&quot;, string(exitErr.Stderr))  
    } else {  
        // There was an issue starting the command  
        log.Fatal(err)  
    }  
}  
</code></pre>

<p>These scenarios cover the majority of use cases you'll encounter when working with external commands in Go. The <code>os/exec</code> package is powerful and provides the tools needed to interact with system commands and subprocesses effectively. Remember that running external commands can introduce security risks, especially when dealing with untrusted input, so always be cautious and validate or sanitize inputs where necessary.</p>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="os-package.html" class="btn btn-neutral float-left" title="Os package"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="path-filepath.html" class="btn btn-neutral float-right" title="Path filepath">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
      <p>Challenge DevOps Team</p>
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="os-package.html" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="path-filepath.html" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "../..";</script>
    <script src="../../js/theme_extra.js"></script>
    <script src="../../js/theme.js"></script>
      <script src="../../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
